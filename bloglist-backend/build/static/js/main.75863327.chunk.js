(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{202:function(e,t,n){e.exports=n(359)},347:function(e,t,n){},359:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(38),c=n.n(o),l=n(6),u=n.n(l),i=n(9),s=n(17),g=n(30),m=n(45),p=n(371),d=Object(s.b)(function(e){return console.log("STATE",e),{notification:e.notification}},null)(function(e){return console.log("Notification:",e.notification),null===e.notification?null:a.a.createElement(p.a,null,e.notification)}),f=n(89),E=n(372),b=a.a.forwardRef(function(e,t){var n=Object(r.useState)(!1),o=Object(f.a)(n,2),c=o[0],l=o[1];console.log("visible",c),console.log("visible ref",t);var u={display:c?"none":""},i={display:c?"":"none"},s=function(){l(!c)};return Object(r.useImperativeHandle)(t,function(){return{toggleVisibility:s}}),a.a.createElement("div",null,a.a.createElement("div",{style:u},a.a.createElement(E.a,{primary:!0,onClick:s},e.buttonLabel)),a.a.createElement("div",{style:i,className:"togglableContent"},e.children,a.a.createElement(E.a,{onClick:s},"Cancel")))}),v=n(367),h=n(43),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"",author:"",url:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INPUT_TITLE":return console.log("blogFormReducer INPUT_USERNAME",t.data),Object(h.a)({},e,{title:t.data});case"INPUT_AUTHOR":return console.log("blogFormReducer INPUT_PASSWORD",t.data),Object(h.a)({},e,{author:t.data});case"INPUT_URL":return console.log("blogFormReducer INPUT_PASSWORD",t.data),Object(h.a)({},e,{url:t.data});case"INPUT_RESETBLOGFORM":return{title:"",author:"",url:""};default:return e}},O=function(e){return console.log("notificationChange launched",e),{type:"SET_NOTIFICATION",notification:e}},y=function(e,t){return console.log("notificationSetter launched"),console.log("notification timeOut in seconds:",t),function(){var n=Object(i.a)(u.a.mark(function n(r){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r(O(e)),setTimeout(function(){r((console.log("notificationClear launched"),{type:"CLEAR_NOTIFICATION",notification:null})),console.log("notification cleared")},1e3*t);case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":case"CLEAR_NOTIFICATION":return t.notification;default:return e}},R=n(123),T=n(29),S=n.n(T),k=null,C={getAll:function(){var e=Object(i.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("/api/blogs");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(i.a)(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:k}},e.next=3,S.a.post("/api/blogs",t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(i.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("blogService, blog",t),e.next=3,S.a.put("".concat("/api/blogs","/").concat(t.id),t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(i.a)(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:k}},e.next=3,S.a.delete("".concat("/api/blogs","/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){k="bearer ".concat(e)}},j={createComment:function(){var e=Object(i.a)(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("".concat("/api/blogs","/").concat(n,"/comments"),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},I=function(){return console.log("initializeBlogs:"),function(){var e=Object(i.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getAll();case 2:n=e.sent,t({type:"INIT_BLOGS",data:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},x=function(e){return console.log("blogAdd, blogObject:",e),function(){var t=Object(i.a)(u.a.mark(function t(n){var r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.create(e);case 2:r=t.sent,n({type:"ADD_BLOG",data:r});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},N=function(e,t){return console.log("createComment, comment",e),console.log("createComment, blogId",t),function(){var n=Object(i.a)(u.a.mark(function n(r){var a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j.createComment(e,t);case 2:a=n.sent,console.log("createComment, newComment",a),r({type:"ADD_COMMENT",data:a});case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;console.log("blogReducer state now: ",e),console.log("action",t);var n=Object(R.a)(e);switch(t.type){case"INIT_BLOGS":return console.log("blogReducer, INIT_BLOGS",t.data),t.data;case"ADD_BLOG":return console.log("blogReducer, ADD_BLOG"),[].concat(Object(R.a)(e),[t.data]);case"REMOVE_BLOG":return console.log("blogReducer, REMOVE_BLOG",t.data),e.filter(function(e){return e.id!==t.data});case"UPDATE_BLOG":return n.map(function(e){return e.id===t.data.id?t.data:e});case"LIKE":return console.log("blogReducer, LIKE",t.data),e.map(function(e){return e.id!==t.data.id?e:t.data});case"ADD_COMMENT":console.log("blogReducer, ADD_COMMENT",t.data);var r=t.data.blog,a=n.find(function(e){return e.id===r});return a.comments.push({text:t.data.text,id:t.data.id}),n.map(function(e){return e.id===a.id?a:e});default:return e}},_=Object(s.b)(function(e){return console.log("BlogForm state",e),{blogForm:e.blogForm,loggedUser:e.loggedUser}},{inputTitle:function(e){return console.log("blogFormReducer inputTitle",e),function(){var t=Object(i.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"INPUT_TITLE",data:e});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},inputAuthor:function(e){return console.log("blogFormReducer inputAuthor",e),function(){var t=Object(i.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"INPUT_AUTHOR",data:e});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},inputUrl:function(e){return console.log("blogFormReducer inputUrl",e),function(){var t=Object(i.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"INPUT_URL",data:e});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},inputResetBLogForm:function(){return console.log("blogFormReducer inputResetBLogForm"),function(){var e=Object(i.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"INPUT_RESETBLOGFORM"});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},notificationSet:y,createBlog:x})(function(e){var t=function(){var t=Object(i.a)(u.a.mark(function t(n){var r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),r={title:e.blogForm.title,author:e.blogForm.author,url:e.blogForm.url},console.log("blogObject",r);try{e.loggedUser?(e.createBlog(r),e.inputResetBLogForm(),e.notificationSet("New blog added: ".concat(r.title," by ").concat(r.author),3)):e.notificationSet("Please login",3)}catch(a){e.notificationSet("Blog not created. Check input fields.",3)}case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement(v.a,{onSubmit:t},a.a.createElement(v.a.Field,null,a.a.createElement("label",null,"title:"),a.a.createElement("input",{id:"title",name:"title",value:e.blogForm.title,onChange:function(t){e.inputTitle(t.target.value)}})),a.a.createElement(v.a.Field,null,a.a.createElement("label",null,"author:"),a.a.createElement("input",{id:"author",name:"author",value:e.blogForm.author,onChange:function(t){e.inputAuthor(t.target.value)}})),a.a.createElement(v.a.Field,null,a.a.createElement("label",null,"url:"),a.a.createElement("input",{id:"url",name:"url",value:e.blogForm.url,onChange:function(t){e.inputUrl(t.target.value)}})),a.a.createElement(E.a,{primary:!0,type:"submit"},"Save")))}),F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:"",password:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INPUT_USERNAME":return console.log("loginReducer INPUT_USERNAME",t.data),Object(h.a)({},e,{username:t.data});case"INPUT_PASSWORD":return console.log("loginReducer INPUT_PASSWORD",t.data),Object(h.a)({},e,{password:t.data});case"INPUT_RESET":return{username:"",password:""};default:return e}},B={login:function(){var e=Object(i.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},A=function(e){return console.log("loggedUserReducer, setUser",e),function(){var t=Object(i.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"SET_LOGGED_USER",data:e});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},P=function(e,t){return console.log("loggedUserReducer, loginSet username",e),console.log("loggedUserReducer, loginSet password",t),function(){var n=Object(i.a)(u.a.mark(function n(r){var a;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,B.login({username:e,password:t});case 2:a=n.sent,console.log("loggedUserReducer, loginSet user",a),window.localStorage.setItem("loggedBlogappUser",JSON.stringify(a)),C.setToken(a.token),r(A(a));case 7:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},M=function(){return console.log("loggedUserReducer, removeLoggedUser"),function(){var e=Object(i.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"REMOVE_LOGGED_USER"});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(console.log("loggedUserReducer state: ",e),console.log("loggedUserReducer action",t),t.type){case"SET_LOGGED_USER":return console.log("loggedUserReducer, SET_LOGGED_USER",t.data),t.data;case"REMOVE_LOGGED_USER":return null;default:return e}},G=Object(s.b)(function(e){return console.log("LoginForm state",e),{login:e.login}},{inputUsername:function(e){return console.log("loginReducer inputUsername",e),function(){var t=Object(i.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"INPUT_USERNAME",data:e});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},inputPassword:function(e){return console.log("loginReducer inputPassword",e),function(){var t=Object(i.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"INPUT_PASSWORD",data:e});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},inputReset:function(){return console.log("inputReset"),function(){var e=Object(i.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"INPUT_RESET"});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},loginSet:P,setLoggedUser:A,removeLoggedUser:M,notificationSet:y})(function(e){console.log("LoginForm props",e);var t=function(){var t=Object(i.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault();try{e.loginSet(e.login.username,e.login.password),e.notificationSet("Login successful.",3),console.log("login successful"),e.inputReset()}catch(r){e.notificationSet("Wrong credentials.",3)}case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return a.a.createElement("div",{className:"loginForm"},a.a.createElement("p",null,"Enter username and password"),a.a.createElement(v.a,{onSubmit:t},a.a.createElement(v.a.Field,null,a.a.createElement("label",null,"username"),a.a.createElement("input",{id:"username",name:"username",value:e.login.username,onChange:function(t){e.inputUsername(t.target.value)}})),a.a.createElement(v.a.Field,null,a.a.createElement("label",null,"password"),a.a.createElement("input",{id:"password",type:"password",value:e.login.password,onChange:function(t){e.inputPassword(t.target.value)}})),a.a.createElement(E.a,{type:"submit"},"login")))}),z=n(370),H=Object(s.b)(function(e){return console.log("BlogList state",e),{blogs:(t=e,t.blogs.sort(function(e,t){return t.likes-e.likes})),loggedUser:e.loggedUser};var t},null)(function(e){return console.log("BlogList props",e),a.a.createElement(z.a,{color:"teal"},a.a.createElement(z.a.Header,null,a.a.createElement(z.a.Row,null,a.a.createElement(z.a.HeaderCell,null,"Title"),a.a.createElement(z.a.HeaderCell,null,"Author"))),a.a.createElement(z.a.Body,null,e.blogs.map(function(e){return a.a.createElement(z.a.Row,{key:e.id},a.a.createElement(z.a.Cell,null,a.a.createElement(g.b,{to:"/blogs/".concat(e.id)},e.title)),a.a.createElement(z.a.Cell,null,e.author))})))}),V=n(375),W=n(374),J=n(369),Z=n(65),K=n(90),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{text:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INPUT_COMMENT":return console.log("blogFormReducer INPUT_USERNAME",t.data),Object(h.a)({},e,{text:t.data});case"RESET_COMMENT":return{text:""};default:return e}},Q=Object(s.b)(function(e){return console.log("BLOG STATE",e),{notification:e.notification,loggedUser:e.loggedUser,blogs:e.blogs,commentForm:e.commentForm}},{notificationSet:y,createComment:N,inputCommentForm:function(e){return console.log("commentFormReducer inputComment",e),function(){var t=Object(i.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"INPUT_COMMENT",data:e});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},resetCommentForm:function(){return console.log("commentFormReducer inputResetCommentForm"),function(){var e=Object(i.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"RESET_COMMENT"});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(function(e){var t=function(){var t=Object(i.a)(u.a.mark(function t(n){var r,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),r=e.commentForm,a=e.blog.id,console.log("addCommentObject, newCommentObject",r);try{e.createComment(r,a),e.resetCommentForm(),e.notificationSet("New comment added: ".concat(r.text),3)}catch(o){e.notificationSet("Comment not created. Check input fields.",3)}case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return a.a.createElement("div",{className:"commentForm"},a.a.createElement(v.a,{onSubmit:t},a.a.createElement("div",null,a.a.createElement("input",{id:"comment",name:"text",onChange:function(t){e.inputCommentForm(t.target.value)},value:e.commentForm.text})," ",a.a.createElement(E.a,{secondary:!0,type:"submit"},"Add comment"))))}),X=Object(s.b)(function(e){return console.log("BLOG STATE",e),{notification:e.notification,loggedUser:e.loggedUser,blogs:e.blogs,commentForm:e.commentForm}},{notificationSet:y,deleteBlog:function(e){return function(){var t=Object(i.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("blog to delete",e),t.next=3,C.remove(e);case 3:n({type:"REMOVE_BLOG",data:e});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},initializeBlogs:I,addLike:function(e){return function(){var t=Object(i.a)(u.a.mark(function t(n){var r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.likes+=1,t.next=3,C.update(e);case 3:r=t.sent,console.log("updatedBlog",r),n({type:"LIKE",data:r});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},createComment:N})(function(e){if(void 0===e.blog)return null;console.log("Blog props",e);var t=e.onClickTest,n=function(){var t=Object(i.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("REMOVE id",n),window.confirm("Do you really want to remove this post?"))try{e.deleteBlog(n),console.log("REMOVE DONE"),e.initializeBlogs(),e.notificationSet("Blog removed!",3)}catch(r){e.notificationSet("Blog not removed.",3)}case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),r=function(){var t=Object(i.a)(u.a.mark(function t(n){var r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),console.log("I Like!"),r=e.blog;try{e.addLike(r),e.notificationSet("New like added!",3)}catch(a){e.notificationSet("Like not added.",3)}case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=Object(i.a)(u.a.mark(function t(r){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),a=e.blog,console.log("props.blog.user.id",e.blog.user.id),console.log("Remove this!"),console.log("event.target",r.target),n(a.id);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("h3",null,e.blog.title),a.a.createElement("p",null,e.blog.author),a.a.createElement("p",null,"Website: ",a.a.createElement("a",{href:e.blog.url,target:"_blank",rel:"noopener noreferrer"},e.blog.url)," ",a.a.createElement("br",null),"Added by: ",e.blog.user?(console.log("props.blog.user.name",e.blog.user.name),e.blog.user.name):"unknown"),a.a.createElement(E.a,{as:"div",labelPosition:"right"},a.a.createElement(E.a,{color:"red",onClick:t||r},a.a.createElement(Z.a,{name:"heart"}),"Like"),a.a.createElement(K.a,{as:"a",basic:!0,color:"red",pointing:"left"},e.blog.likes)),a.a.createElement(function(){try{if(e.loggedUser&&e.blog.user.username===e.loggedUser.username)return a.a.createElement("p",null,a.a.createElement(E.a,{onClick:o},"Remove post"))}catch(t){console.log("error",t)}return a.a.createElement("div",null)},null),a.a.createElement(function(){return console.log("blog comments",e.blog.comments),a.a.createElement(V.a,{color:"teal"},a.a.createElement(W.a,{as:"h3",dividing:!0},"Comments"),a.a.createElement(J.a.Group,null,e.blog.comments.map(function(e){return a.a.createElement(J.a,{key:e.id},a.a.createElement(J.a.Text,null,e.text))})))},null),a.a.createElement(Q,{blog:e.blog}))))}),Y=Object(s.b)(function(e){return console.log("UserList state",e),{users:e.users,loggedUser:e.loggedUser}},null)(function(e){return console.log("UserList props",e),a.a.createElement(z.a,{color:"teal"},a.a.createElement(z.a.Header,null,a.a.createElement(z.a.Row,null,a.a.createElement(z.a.HeaderCell,null,"Name"),a.a.createElement(z.a.HeaderCell,null,"Blogs created"))),a.a.createElement(z.a.Body,null,e.users.map(function(e){return a.a.createElement(z.a.Row,{key:e.id},a.a.createElement(z.a.Cell,null,a.a.createElement(g.b,{to:"/users/".concat(e.id)},e.name)),a.a.createElement(z.a.Cell,null,e.blogs.length))})))}),$=Object(s.b)(function(e){return console.log("BLOG STATE",e),{notification:e.notification,loggedUser:e.loggedUser,blogs:e.blogs}},null)(function(e){try{return console.log("UserInfoPage",e.user),a.a.createElement("div",null,a.a.createElement(W.a,{as:"h1"},e.user.name),a.a.createElement(z.a,{color:"teal"},a.a.createElement(z.a.Header,null,a.a.createElement(z.a.Row,null,a.a.createElement(z.a.HeaderCell,null,"Added blogs"))),a.a.createElement(z.a.Body,null,e.user.blogs.map(function(e){return a.a.createElement(z.a.Row,{key:e.id},a.a.createElement(z.a.Cell,null,a.a.createElement(g.b,{to:"/blogs/".concat(e.id)},e.title)))}))))}catch(t){return console.log("UserInfoPage error"),null}}),ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case"INCREMENT":return e+1;case"DECREMENT":return e-1;case"ZERO":return 0;default:return e}},te={getAllUsers:function(){var e=Object(i.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log("userReducer state: ",e),console.log("userReducer action",t),t.type){case"INIT_USERS":return console.log("userReducer, INIT_USERS",t.data),t.data;default:return e}},re=function(e){var t=Object(r.useState)(""),n=Object(f.a)(t,2),a=n[0],o=n[1];return{type:e,value:a,onChange:function(e){o(e.target.value)},reset:function(){o("")}}},ae=(n(347),n(366)),oe=n(373),ce=Object(s.b)(function(e){return{blogs:e.blogs,loggedUser:e.loggedUser,users:e.users,counter:e.counter}},{initializeBlogs:I,counterPlus:function(){return console.log("plus"),function(){var e=Object(i.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"INCREMENT"});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},counterMinus:function(){return console.log("minus"),function(){var e=Object(i.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"DECREMENT"});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},counterZero:function(){return console.log("zero"),function(){var e=Object(i.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"ZERO"});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},notificationSet:y,createBlog:x,loginSet:P,setLoggedUser:A,removeLoggedUser:M,initializeUsers:function(){return console.log("initializeUsers"),function(){var e=Object(i.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.getAllUsers();case 2:n=e.sent,t({type:"INIT_USERS",data:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(function(e){console.log("App props",e),Object(r.useEffect)(function(){e.initializeBlogs(),e.initializeUsers();var t=window.localStorage.getItem("loggedBlogappUser");if(t){var n=JSON.parse(t);e.setLoggedUser(n),C.setToken(n.token)}},[]);var t=re("text"),n=re("password"),o=a.a.createRef(),c=function(){var t=Object(i.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{window.localStorage.removeItem("loggedBlogappUser"),console.log("logging out..."),e.removeLoggedUser(),e.notificationSet("Logout successful.",3),console.log("logout successful")}catch(n){e.notificationSet("Logout error.",3)}case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),l=function(){return a.a.createElement("div",null,a.a.createElement(W.a,{as:"h1"},"Latest blogs"),a.a.createElement(H,null),a.a.createElement(W.a,{as:"h2"},"Add blog"),a.a.createElement("div",null,a.a.createElement(b,{buttonLabel:"Create new blog",ref:o},a.a.createElement(_,null))),a.a.createElement(W.a,{as:"h2"},"Counter test"),a.a.createElement("button",{onClick:function(){e.counterPlus()}},"plus"),a.a.createElement("button",{onClick:function(t){e.counterMinus()}},"minus"),a.a.createElement("button",{onClick:function(t){e.counterZero()}},"zero"),a.a.createElement("p",null,"Counter: ",e.counter))},s=function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Users"),a.a.createElement(Y,null))},p=function(){return a.a.createElement("div",null,a.a.createElement(W.a,{as:"h1"},"Login"),e.loggedUser?a.a.createElement("div",null,a.a.createElement("h3",null,"Current user: ",e.loggedUser.name),a.a.createElement("h3",null,"Username: ",e.loggedUser.username)):a.a.createElement(G,{username:t,password:n}))},f={padding:5};return a.a.createElement(ae.a,null,a.a.createElement(d,null),a.a.createElement(g.a,null,a.a.createElement("div",null,a.a.createElement(oe.a,null,a.a.createElement(oe.a.Item,{link:!0},a.a.createElement(g.b,{style:f,to:"/"},"Home")),a.a.createElement(oe.a.Item,{link:!0},a.a.createElement(g.b,{style:f,to:"/users"},"Users")),a.a.createElement(oe.a.Menu,{position:"right"},a.a.createElement(oe.a.Item,{link:!0},e.loggedUser?a.a.createElement("span",null,a.a.createElement("em",null,e.loggedUser.name," logged in")," ",a.a.createElement(E.a,{id:"logout",color:"teal",onClick:function(){return c()}},"Logout")):a.a.createElement(g.b,{to:"/login"},a.a.createElement(E.a,{primary:!0},"Login"))))),a.a.createElement(m.b,{exact:!0,path:"/",render:function(){return a.a.createElement(l,null)}}),a.a.createElement(m.b,{exact:!0,path:"/blogs/:id",render:function(t){var n,r=t.match;return a.a.createElement(X,{blog:(n=r.params.id,console.log("blogById props",e),e.blogs.find(function(e){return e.id===n}))})}}),a.a.createElement(m.b,{exact:!0,path:"/users",render:function(){return e.loggedUser?a.a.createElement(s,null):a.a.createElement(m.a,{to:"/login"})}}),a.a.createElement(m.b,{exact:!0,path:"/users/:id",render:function(t){var n,r=t.match;return a.a.createElement($,{user:(n=r.params.id,console.log("userById props.users",e.users),e.users.find(function(e){return e.id===n}))})}}),a.a.createElement(m.b,{path:"/login",render:function(){return a.a.createElement(p,null)}}))),a.a.createElement(function(){return a.a.createElement(V.a,{inverted:!0,color:"grey"},a.a.createElement(W.a,{as:"h5"},"Blog app, Department of Computer Science 2019"))},null))}),le=n(52),ue=n(188),ie=n(189),se=Object(le.combineReducers)({counter:ee,blogs:L,notification:U,loggedUser:D,users:ne,login:F,blogForm:w,commentForm:q}),ge=Object(le.createStore)(se,Object(ie.composeWithDevTools)(Object(le.applyMiddleware)(ue.a)));c.a.render(a.a.createElement(s.a,{store:ge},a.a.createElement(ce,null)),document.getElementById("root"))}},[[202,1,2]]]);
//# sourceMappingURL=main.75863327.chunk.js.map